apiVersion: v1
kind: Service
metadata:
  name: {{ .Values.name }}
  namespace: {{ .Values.namespace }}
spec:
  type: ClusterIP
  ports:
    - port: 3000
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/instance: {{ .Values.name }}
    app.kubernetes.io/name: {{ .Values.name }}
---
{{/*apiVersion: v1*/}}
{{/*kind: Service*/}}
{{/*metadata:*/}}
{{/*  name: {{ .Values.name }}-dns*/}}
{{/*  namespace: {{ .Values.namespace }}*/}}
{{/*  annotations:*/}}
{{/*    lbipam.cilium.io/ips: {{ .Values.ip | quote }}*/}}
{{/*    lbipam.cilium.io/sharing-key: ingress*/}}
{{/*    lbipam.cilium.io/sharing-cross-namespace: "*"*/}}
{{/*  labels:*/}}
{{/*    lb-ip-pool: cilium-gateway*/}}
{{/*spec:*/}}
{{/*  selector:*/}}
{{/*    app.kubernetes.io/instance: {{ .Values.name }}*/}}
{{/*    app.kubernetes.io/name: {{ .Values.name }}*/}}
{{/*  type: LoadBalancer*/}}
{{/*  ports:*/}}
{{/*    - name: dns-tcp*/}}
{{/*      protocol: TCP*/}}
{{/*      port: 53*/}}
{{/*      targetPort: 53*/}}
{{/*    - name: dns-udp*/}}
{{/*      protocol: UDP*/}}
{{/*      port: 53*/}}
{{/*      targetPort: 53*/}}
