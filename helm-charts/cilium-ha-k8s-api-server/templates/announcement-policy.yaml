apiVersion: cilium.io/v2alpha1
kind: CiliumL2AnnouncementPolicy
metadata:
  name: {{ .Values.k8sApiServer.name }}
  namespace: {{ .Release.Namespace }}
spec:
  nodeSelector:
    matchExpressions:
      - key: node-role.kubernetes.io/control-plane
        operator: Exists
  serviceSelector: {{ toYaml .Values.k8sApiServer.l2AnnouncementPolicy.serviceSelector | nindent 4 }}
  interfaces: {{ toYaml .Values.k8sApiServer.l2AnnouncementPolicy.interfaces | nindent 4 }}
  externalIPs: true
  loadBalancerIPs: true
